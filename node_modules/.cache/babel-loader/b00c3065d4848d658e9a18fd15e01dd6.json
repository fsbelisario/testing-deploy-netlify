{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\felip\\\\Desktop\\\\Projetos\\\\Programa\\xE7\\xE3o\\\\Cubos Academy\\\\2021.08.24 - Front-end\\\\testing-deploy-netlify\\\\src\\\\pages\\\\Login\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, TextField, Button, Typography, Backdrop, CircularProgress } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport useStyles from './styles';\nimport { useForm } from 'react-hook-form';\nimport { Link, useHistory } from 'react-router-dom';\nimport useAuth from '../../hook/useAuth';\nimport { post } from '../../services/ApiClient';\nimport InputSenha from '../../components/InputSenha';\nimport useLoja from '../../hook/useLoja';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const classes = useStyles();\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const history = useHistory();\n  const [erro, setErro] = useState('');\n  const [carregando, setCarregando] = useState(false);\n  const {\n    atualizar\n  } = useLoja();\n  const {\n    logar\n  } = useAuth();\n\n  async function onSubmit(data) {\n    setCarregando(true);\n    setErro('');\n\n    try {\n      const {\n        dados,\n        erro\n      } = await post('login', data);\n\n      if (erro) {\n        setErro(dados);\n        return;\n      }\n\n      logar(dados.token);\n      atualizar(dados.usuario.nome_loja);\n      history.push('/produtos');\n    } catch (error) {\n      setErro(error.message);\n    } finally {\n      setCarregando(false);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: classes.card,\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          className: classes.form,\n          noValidate: true,\n          autoComplete: \"off\",\n          onSubmit: handleSubmit(onSubmit),\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            className: classes.email,\n            label: \"E-mail\",\n            ...register('email', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(InputSenha, {\n            className: classes.senha,\n            label: \"Senha\",\n            register: () => register('senha', {\n              required: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), erro && /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            children: erro\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: classes.botao,\n            type: \"submit\",\n            children: \"Entrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [\"Primeira vez aqui? \", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/cadastro\",\n              children: \"CRIE UMA CONTA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 60\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Backdrop, {\n            className: classes.backdrop,\n            open: carregando,\n            children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n              color: \"inherit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"DFyPclkfAPl4nN3b65hpL2kncZY=\", false, function () {\n  return [useStyles, useForm, useHistory, useLoja, useAuth];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/felip/Desktop/Projetos/Programação/Cubos Academy/2021.08.24 - Front-end/testing-deploy-netlify/src/pages/Login/index.js"],"names":["React","useState","Card","CardContent","TextField","Button","Typography","Backdrop","CircularProgress","Alert","useStyles","useForm","Link","useHistory","useAuth","post","InputSenha","useLoja","Login","classes","register","handleSubmit","history","erro","setErro","carregando","setCarregando","atualizar","logar","onSubmit","data","dados","token","usuario","nome_loja","push","error","message","root","card","form","email","required","senha","botao","backdrop"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { \r\n  Card, \r\n  CardContent, \r\n  TextField, \r\n  Button, \r\n  Typography,\r\n  Backdrop,\r\n  CircularProgress\r\n} from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport useStyles from './styles';\r\n\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link, useHistory } from 'react-router-dom';\r\n\r\nimport useAuth from '../../hook/useAuth';\r\nimport { post } from '../../services/ApiClient';\r\nimport InputSenha from '../../components/InputSenha';\r\nimport useLoja from '../../hook/useLoja';\r\n\r\nfunction Login() {\r\n  const classes = useStyles();\r\n  const { register, handleSubmit } = useForm();\r\n  const history = useHistory();\r\n  const [erro, setErro] = useState('');\r\n  const [carregando, setCarregando] = useState(false);\r\n  const { atualizar } = useLoja();\r\n  const { logar } = useAuth();\r\n\r\n  async function onSubmit(data) {\r\n    setCarregando(true);\r\n    setErro('');\r\n\r\n    try {\r\n      const { dados, erro } = await post('login', data);\r\n\r\n      if (erro) {\r\n        setErro(dados);\r\n        return;\r\n      }\r\n\r\n      logar(dados.token);\r\n      atualizar(dados.usuario.nome_loja)\r\n\r\n      history.push('/produtos');\r\n    } catch (error) {\r\n      setErro(error.message);\r\n    } finally {\r\n      setCarregando(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Card className={classes.card}>\r\n        <CardContent>\r\n          <form \r\n            className={classes.form}\r\n            noValidate\r\n            autoComplete=\"off\"\r\n            onSubmit={handleSubmit(onSubmit)}\r\n          >\r\n            <Typography variant=\"h4\">Login</Typography>\r\n            <TextField className={classes.email} label=\"E-mail\" {...register('email', { required: true })} />\r\n            <InputSenha className={classes.senha} label=\"Senha\" register={() => register('senha', { required: true })} />\r\n            {erro && <Alert severity=\"error\">{erro}</Alert>}\r\n            <Button className={classes.botao} type=\"submit\">\r\n              Entrar \r\n            </Button>\r\n            <Typography variant=\"body2\">Primeira vez aqui? <Link to='/cadastro'>CRIE UMA CONTA</Link></Typography>\r\n            <Backdrop className={classes.backdrop} open={carregando}>\r\n              <CircularProgress color=\"inherit\" />\r\n            </Backdrop>\r\n          </form>     \r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}